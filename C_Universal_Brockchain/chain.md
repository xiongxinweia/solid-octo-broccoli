# 区块链开发实战预备知识

[toc]

## 区块链很难学吗？

大家常见误区主要有两个：

**第一个误区：将智能合约开发与区块链底层协议开发混为一谈。**

大部分人认为的区块链开发其实是智能合约开发，也就是基于某一个链（比如以太坊、超级账本Fabric等）进行智能合约开发，而不是区块链底层协议开发。

区块链底层协议开发门槛很高，需要有丰富的密码学、分布式等技术开发经验才可以胜任。但智能合约开发其实就是基于区块链底层协议提供的高级语言进行编程，目前常用的有以太坊的solidity、EOS的C++、Fabric的go语言。

**第二个误区：将技术研究和工具使用混为一谈。**

如果我们的目标是要去谷歌、微软这样的大公司从事研发工作，那就需要具备深厚的计算机素养，熟悉计算机原理、算法等知识。但如果我们的目标是网站、APP、微信小程序、网络爬虫等应用的开发，那么只需要学习一点儿高级语言即可。

比如APP开发就需要学习Android或者IOS的开发，网站开发就需要具备一些Html、JavaScript知识，人工智能就需要学习Python。

同样学习区块链智能合约开发，在以太坊上我们需要掌握solidity（类似于JavaScript），在Fabric上需要掌握go语言、Node.js、Java其中一门开发语言，EOS需要掌握C++。

从工程角度来看，软件开发更看重的是业务需求、系统设计能力。一个高级工程师和一个初级工程师水平的差异在于两者的需求理解能力和软件设计水平的差异。如果只从编码角度来看，工程师就像生产线的工人，只不过大家使用的工具不同罢了。程序员需要熟悉计算机的基本操作，熟悉一些工程师必备的工具就可以开始干活了。

**在实际工程中，那些熟悉业务的人员，一旦掌握了开发工具，软件开发能力反而会超过一名纯粹只懂技术的人员**。



## 区块链技术

+ P2P网络协议

  + 中心化
  + 分布式
  + 去中心化（即使客户端，也是服务端，即是生产者，也是消费者）

+ 密码学

  + HASH
  + 对称加密（AES、DES)
  + 非对称加密（RSA、**椭圆曲线**）

+ 共识算法：分布式一致性算法

  + 强一致性
  + 最终一致性

+ 共识算法–CAP原理

  + 一致性
  + 可用性
  + 分区容忍性

+ 共识原理–ACID原理

  + 原子性
  + 隔离性
  + 一致性
  + 持久性

+ 共识算法类型（联盟链和共识链区别）

  + Paxos（一般的共识）
  + 拜占庭容错

  

---

## 区块链开发应该具备的能力

那么要踏进区块链世界成为区块链世界里的弄潮儿，从事区块链开发到底需要具备什么样的能力？经过梳理和思考，我认为从事区块链开发需要具备以下三种能力。

1. 能够正确理解区块链。了解区块链技术的基本概念，熟悉密码学、分布式、共识机制、P2P网络等技术，熟悉比特币、以太坊、超级账本等区块链技术实现原理，对区块链商业价值和应用有一定的认知。
2. 至少熟悉一种开发语言。比如Solidity、Node.js、C++、Go等。
3. 至少熟悉一种区块链的智能合约开发。比如以太坊、超级账本、EOS等。

关于第一点正确理解区块链，可能是大多数人的一个坎。对于大部分人来说，最难的事情是克服心理上的障碍去拥抱一个新生事物。由于区块链技术比较新，有价值的书籍和资料比较少。片面和断章取义地理解都会误导大家，如果能够在一段时间里系统学习区块链，我认为这不是一件难事。第一章[区块链技术理论](https://learnblockchain.cn/books/enterprise/chapter1_00.html)目的就是帮助大家跨越认知门槛。

第二点至少熟悉一种开发语言，我认为也不难。不管是Solidity还是Node.js、golang（关于golang开发会在智能合约部分详细讲解）这方面的学习资料已经非常多了，大家可以选择一种开发语言进行深入全面地学习。比如以太坊智能合约开发使用的是Solidity语言，超级账本的Fabric支持Go语言、Node.js和Java， EOS目前使用的开发语言是C++。

大部分的编程语言都是由数据类型、逻辑结构、函数等组成，只不过不同语言语法不同而已。



## 区块链编程需要注意的问题

虽然智能合约开发与传统开发语言比较类似，但编程时需要注意以下三个问题：

- 确定性（Deterministic）

确定性指的是一个程序每次给特定的输入会得到相同的输出，比如1+1=2，任何时候1+1都等于2。由于智能合约是运行在不同节点上的一段代码，因此必须确保代码输出结果的一致性。

- 可终止（Terminable）

由于区块链资源有限，为了避免垃圾代码和恶意程序占用资源，通过情况会引入经济机制限制资源的浪费。比如以太坊智能合约需要支付一定的GAS费，而EOS上需要购买内存（RAM），并通过抵押方式换取一定的CPU和NET资源。运行在区块链上的智能合约一定要避免重复循环执行，必须在给定的条件下终止程序。比如超过某一个时间或者超过一定的费用，合约自动终止。

- 代码隔离（Isolated）

在公链上，任何人都可以上传自己的智能合约，由于智能合约可能存在bug或者病毒，如果智能合约没有被隔离，就会影响整个区块链系统地运行，因此将智能合约运行在沙盒（SandBox）机制里可以有效避免合约对整个经济系统造成破坏。

以太坊虚拟机（EVM）是以太坊智能合约的运行环境。它不仅被沙盒封装起来，事实上它被完全隔离，也就是说运行在EVM内部的代码不能接触到网络、文件系统或者其它进程，甚至智能合约之间也只有有限的调用。

EOS虚拟机采用的WebAssembly（WASM）是一个内存安全的沙盒执行环境虚拟机，为智能合约提供了安全保障。

超级账本Fabric使用了Docker来存放链上的代码，而不需要依靠特定的虚拟机，Docker为链码执行提供了一个安全、轻便的语言执行环境。

不同区块链使用的开发语言会有所不同，智能合约的特性也会有一些差别。



## 区块链开发工程师岗位技能要求

区块链开发工程师岗位技能要求：

1. 熟悉密码学、分布式、共识机制、P2P网络等技术；
2. 熟悉比特币、以太坊、超级账本、EOS等区块链技术实现原理；
3. 对区块链的商业价值和应用有一定的认知；
4. 熟悉Linux、Docker、Git等工具；
5. 至少熟悉一种开发语言，如Solidity、Node.js、C++、Go等；
6. 至少熟悉一种智能合约开发语言，如以太坊、超级账本、EOS等。

以上是区块链开发工程师的基本技能要求。在实际工作中，还会涉及区块链平台研发、区块链架构师等岗位。

区块链平台研发岗位要求熟悉主流区块链底层实现原理并有一定的区块链底层开发经验，熟悉BaaS、跨链等相关技术。

区块链架构师岗位重点关注系统架构设计，公链还涉及通证设计。要求对技术和应用都有一定的研究，能够指导工程师进行软件开发，并能钻研业务、设计合理的区块链应用场景。区块链技术选型

我们在第一章介绍区块链技术原理的时候，提到了比特币、以太坊和超级账本这三种区块链技术平台，这里我们将三种平台做个对比，看看为什么在企业实施区块链的时候要采用超级账本。

![大话区块链](https://s2.loli.net/2022/05/21/OjA9LJFGiv3afcr.png)

> 图2-05 区块链技术选型

从项目定位来看，比特币和以太坊都属于公链，只有超级账本是联盟链。大家都知道从2017年9月4日之后，我们国家是不允许发行数字货币的，而超级账本就是一种无币区块链。

在共识机制上，比特币和以太坊目前都采用了工作量证明机制，比特币每秒平均只有3-4笔交易，以太坊平均也只有每秒30笔交易。超级账本中的Fabric采用了Kafka、Raft、PBFT等共识机制供大家根据业务进行选择，可以将区块链效率提升到上千笔每秒。

除了效率之外，企业应用还存在隐私问题，Fabric采用授权机制和多通道机制可以有效保护用户隐私，是企业级区块链的首选平台。



